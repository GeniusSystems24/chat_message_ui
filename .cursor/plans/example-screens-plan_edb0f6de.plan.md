---
name: example-screens-plan
overview: تحديد وتخطيط كل شاشات الأمثلة المطلوبة لإظهار ميزات المكتبة، وإضافة شاشة واقعية متكاملة تعتمد Firebase موجودة مسبقًا لإرسال كل أنواع الرسائل.
todos:
  - id: audit-examples
    content: حصر الشاشات الحالية وميزات كل شاشة
    status: completed
  - id: firebase-design
    content: تصميم طبقة بيانات Firebase للرسائل
    status: completed
  - id: firebase-screen
    content: إضافة شاشة Firebase المتكاملة وربطها
    status: completed
  - id: update-navigation
    content: تحديث التنقل والواجهة الرئيسية للوصول
    status: completed
---

# خطة شاشات الأمثلة

## قائمة الشاشات المطلوبة ووصفها

- **`home_screen.dart`**
شاشة فهرسة تجمع كل أمثلة المكتبة في قائمة واضحة.
تحتوي على أقسام منفصلة (أساسيات، فقاعات، ميزات، ثيمات).
تُظهر وصفًا مختصرًا لكل شاشة قبل الدخول.
تدعم تنقل سريع وتجربة استكشاف مرنة.

- **`basic_chat_example.dart`**
مثال محادثة نصية بسيطة يوضح الحد الأدنى من التكامل.
يشرح تدفق إرسال الرسالة وإظهارها في القائمة.
يركز على التهيئة الأساسية لـ `ChatScreen`.
مناسب كبداية للمطورين الجدد بالمكتبة.

- **`full_chat_example.dart`**
مثال شامل يعرض تفاعل المستخدمين، الردود، البحث، والتحديد.
يُبرز شريط العنوان (عادي وتحديد متعدد) وتصرفاته.
يوضح التعامل مع الإشعارات البسيطة عند التفاعل.
نقطة مرجعية لمعظم حالات الاستخدام داخل التطبيق.

- **`input_features_example.dart`**
يركز على ميزات الإدخال (إرفاقات، اقتراحات عائمة، معاينات).
يوضح إدارة حالة الإدخال والتبديل بين الأنماط.
يشرح كيفية تخصيص `ChatInput` بالخيارات المختلفة.
مفيد لفهم تجربة الكتابة وإرسال المحتوى.

- **`message_types_example.dart`**
يقدم نظرة شاملة على أنواع الرسائل المدعومة.
يعرض كل نوع برسالة تمثيلية واقعية.
يوضح شكل البيانات المطلوبة لكل نوع.
مناسب لاختبار التكامل مع مصادر البيانات.

- **`reactions_example.dart`**
يركز على إضافة التفاعلات وإظهارها على الرسائل.
يشرح منطق التبديل والإزالة وإحصاء التفاعلات.
يوضح التفاعل بين الحالة والمعاينة في الواجهة.
مثال صغير لاختبار سلوك التفاعلات.

- **`theming_example.dart`**
يستعرض تخصيص الثيمات والألوان والخطوط.
يوضح كيفية تمرير الثيم عبر مكونات المكتبة.
يعرض مقارنة قبل/بعد للتخصيص.
يساعد على مواءمة الهوية البصرية للتطبيق.

- **`bubbles/*_bubble_example.dart`** (8 شاشات منفصلة)
كل شاشة تعرض نوع فقاعة واحد فقط بشكل مركز.
تشمل: نص، صورة، فيديو، صوت، ملف، جهة اتصال، موقع، استطلاع.
توضح المتطلبات الخاصة بكل نوع (روابط/بيانات/وسائط).
تسهّل اختبار كل فقاعة بمعزل عن بقية المكونات.

- **`features/chat_input_example.dart`**
مثال تفصيلي لمكون الإدخال فقط بدون شاشة محادثة كاملة.
يوضح الخيارات المتقدمة وإدارة الأحداث.
مناسب لمن يريد دمج الإدخال ضمن شاشة مخصصة.

- **`features/app_bar_example.dart`**
يعرض `ChatAppBar` و`ChatSelectionAppBar` منفصلين.
يوضح خيارات القوائم، البحث، والإجراءات السريعة.
يساعد على تخصيص رأس المحادثة حسب الحاجة.

- **`features/reply_example.dart`**
يركز على آلية الرد والمعاينة المصغرة.
يوضح تجهيز بيانات الرد وربطها بالإرسال.
مثال واضح لسيناريو الرد على رسالة محددة.

- **`features/search_example.dart`**
يوضح شاشة البحث في الرسائل وكيفية اختيار نتيجة.
يعرض التكامل مع `ChatMessageSearchView`.
مثال على التنقل والعودة بنتيجة بحث.

- **شاشة جديدة: `firebase_full_chat_example.dart`**
شاشة واقعية متكاملة تعمل مع Firebase الموجود مسبقًا.
تدعم إرسال كل أنواع الرسائل إلى Firestore/Storage حسب النوع.
تتضمن تحميل أولي، تحديثات مباشرة، وإدارة حالة الإرسال.
تعرض كل الميزات الأساسية (ردود، تفاعلات، بحث، إرفاقات).
تمثل تجربة إنتاجية حقيقية يمكن البناء عليها مباشرة.

## التغييرات المتوقعة في الملفات

- إضافة شاشة جديدة في `example/lib/src/screens/firebase_full_chat_example.dart` تتكامل مع Firebase.
- إضافة منطق بيانات/متحكم في `example/lib/src/data/` لتجهيز/إرسال/تحميل الرسائل من Firebase.
- تحديث `example/lib/src/screens/screens.dart` و`features/bubbles` و`home_screen.dart` لإدراج الشاشة الجديدة وقسم Firebase.
- تحديث مسارات التوجيه في `example/lib/main.dart` لإتاحة الانتقال.
- استخدام إعدادات Firebase الموجودة في `example/lib/firebase_options.dart` دون إعادة تهيئة.

## تفاصيل تنفيذ Firebase المتوقعة

- بناء طبقة خدمة بسيطة للرسائل تدعم:
- إرسال نص، صورة، فيديو، صوت، ملف، جهة اتصال، موقع، استطلاع.
- رفع الوسائط إلى Firebase Storage عند الحاجة.
- إنشاء سجل الرسالة في Firestore مع الميتاداتا اللازمة.
- الاستماع الفوري للتحديثات وإضافة/حذف/تعديل الرسائل.
- توحيد تحويل بيانات Firestore إلى `IChatMessageData` المعتمدة في المكتبة.
- توفير عينات بيانات للاختبار في حالة عدم وجود محتوى.

## اختبارات/تحقق مقترحة

- تشغيل مثال Firebase والتحقق من ظهور الرسائل فور الإرسال.
- تجربة إرسال كل نوع رسالة والتأكد من عرض الفقاعة الصحيحة.
- التأكد من عمل البحث والردود والتفاعلات في شاشة Firebase.