# Ø®Ø·Ø© ØªØ·ÙˆÙŠØ± Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© (Floating Suggestions)

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

### Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠ (`FloatingSuggestionCard`) ÙŠØ¯Ø¹Ù…:
- `@` Ù„Ù„Ø¥Ø´Ø§Ø±Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Mentions)
- `#` Ù„Ù„Ù‡Ø§Ø´ØªØ§Ù‚Ø§Øª (Hashtags)
- `/` Ù„Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠØ¹Ø© (Quick Replies)
- `$` Ù„Ù„Ù…Ù‡Ø§Ù… (Tasks)

### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©
1. **Ø¹Ø¯Ù… Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªØ®ØµÙŠØµ Ø§Ù„ÙƒØ§ÙÙŠØ©**: Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø«Ø§Ø¨ØªØ© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯
2. **ØªØµÙ…ÙŠÙ… Ù…Ø­Ø¯ÙˆØ¯**: Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆØªÙØªÙ‚Ø± Ù„Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ
3. **Ø¹Ø¯Ù… Ø¯Ø¹Ù… Ø§Ù„Ø«ÙŠÙ…**: Ù„Ø§ ÙŠØ³ØªØ®Ø¯Ù… `ChatThemeData` Ù„Ù„ØªÙ†Ø³ÙŠÙ‚
4. **ØµØ¹ÙˆØ¨Ø© Ø¥Ø¶Ø§ÙØ© Ø£Ù†ÙˆØ§Ø¹ Ø¬Ø¯ÙŠØ¯Ø©**: ÙŠØªØ·Ù„Ø¨ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù€ enum ÙˆØ§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
5. **Ø¹Ø¯Ù… Ø¯Ø¹Ù… Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯**: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¨Ø§Ù„Ø£Ø³Ù‡Ù…

---

## ğŸ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù

### 1. Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªØ®ØµÙŠØµ Ø§Ù„ÙƒØ§Ù…Ù„Ø©
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `SuggestionTypeConfig` Ù„ØªØ®ØµÙŠØµ ÙƒÙ„ Ù†ÙˆØ¹
- [ ] Ø¯Ø¹Ù… Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙˆØ£Ù„ÙˆØ§Ù† ÙˆØ¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø®ØµØµØ© Ù„ÙƒÙ„ Ù†ÙˆØ¹
- [ ] Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø¥Ø¶Ø§ÙØ© Ø£Ù†ÙˆØ§Ø¹ Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

### 2. ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„Ù…Ø¸Ù‡Ø±
- [ ] ØªØµÙ…ÙŠÙ… Ø¨Ø·Ø§Ù‚Ø© Ø­Ø¯ÙŠØ«Ø© Ù…Ø¹ Ø¸Ù„Ø§Ù„ ÙˆØ­ÙˆØ§Ù Ù†Ø§Ø¹Ù…Ø©
- [ ] Ø¯Ø¹Ù… Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ù„Ù„Ø¸Ù‡ÙˆØ± ÙˆØ§Ù„Ø§Ø®ØªÙØ§Ø¡
- [ ] ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ø¹ ØµÙˆØ± ÙˆØ£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø£ÙØ¶Ù„
- [ ] Ø¯Ø¹Ù… Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Loading State)
- [ ] Ø¯Ø¹Ù… Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§Øº (Empty State) Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© Ù…Ø®ØµØµØ©

### 3. Ø¯Ù…Ø¬ Ù†Ø¸Ø§Ù… Ø§Ù„Ø«ÙŠÙ…
- [ ] Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionTheme` Ø¶Ù…Ù† `ChatThemeData`
- [ ] Ø¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ ÙˆØ§Ù„Ø¯Ø§ÙƒÙ†
- [ ] ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø£Ø­Ø¬Ø§Ù…

### 4. ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- [ ] Ø¯Ø¹Ù… Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ (Ø£Ø³Ù‡Ù… + Enter)
- [ ] ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„Ø¨Ø­Ø«
- [ ] Ø¯Ø¹Ù… Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø³Ù„Ø³
- [ ] Ø¥Ø¶Ø§ÙØ© Highlight Ù„Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯

```
lib/src/widgets/input/
â”œâ”€â”€ floating_suggestion/
â”‚   â”œâ”€â”€ floating_suggestion.dart              # Export file
â”‚   â”œâ”€â”€ floating_suggestion_card.dart         # Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø­Ø³Ù‘Ù†Ø©)
â”‚   â”œâ”€â”€ floating_suggestion_config.dart       # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù†ÙˆØ§Ø¹
â”‚   â”œâ”€â”€ floating_suggestion_item_widget.dart  # Ø¹Ù†ØµØ± Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­
â”‚   â”œâ”€â”€ floating_suggestion_header.dart       # ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
â”‚   â”œâ”€â”€ floating_suggestion_empty.dart        # Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§Øº
â”‚   â”œâ”€â”€ floating_suggestion_loading.dart      # Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
â”‚   â””â”€â”€ floating_suggestion_controller.dart   # Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯
â”œâ”€â”€ input_models.dart                         # (ØªØ­Ø¯ÙŠØ«)
â””â”€â”€ chat_input.dart                           # (ØªØ­Ø¯ÙŠØ«)

lib/src/theme/
â””â”€â”€ chat_theme.dart                           # Ø¥Ø¶Ø§ÙØ© FloatingSuggestionTheme
```

---

## ğŸ”§ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®ØµÙŠØµ

#### 1.1 Ø¥Ù†Ø´Ø§Ø¡ `SuggestionTypeConfig`

```dart
/// ØªÙƒÙˆÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­
class SuggestionTypeConfig {
  /// Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø­ÙØ² (Ù…Ø«Ù„ @ Ø£Ùˆ #)
  final String symbol;

  /// Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹ Ù„Ù„Ø¹Ø±Ø¶
  final String displayName;

  /// Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù†ÙˆØ¹
  final IconData icon;

  /// Ù„ÙˆÙ† Ø§Ù„Ù†ÙˆØ¹
  final Color? color;

  /// Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
  final String? title;

  /// ÙˆØµÙ Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  final String? description;

  /// Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¹Ù†ØµØ±
  final Widget Function(BuildContext context)? defaultItemIconBuilder;

  /// Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø¹Ù†ØµØ±
  final double itemHeight;

  /// Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ Ù„Ù„Ø¨Ø·Ø§Ù‚Ø©
  final double maxHeight;

  const SuggestionTypeConfig({
    required this.symbol,
    required this.displayName,
    required this.icon,
    this.color,
    this.title,
    this.description,
    this.defaultItemIconBuilder,
    this.itemHeight = 56.0,
    this.maxHeight = 250.0,
  });
}
```

#### 1.2 ØªØ­Ø¯ÙŠØ« `FloatingSuggestionType` Ù„ÙŠÙƒÙˆÙ† Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙˆØ³ÙŠØ¹

```dart
/// Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
class FloatingSuggestionTypes {
  static const username = SuggestionTypeConfig(
    symbol: '@',
    displayName: 'Mentions',
    icon: Icons.alternate_email,
    title: 'Mention someone',
  );

  static const hashtag = SuggestionTypeConfig(
    symbol: '#',
    displayName: 'Hashtags',
    icon: Icons.tag,
    title: 'Add hashtag',
  );

  static const quickReply = SuggestionTypeConfig(
    symbol: '/',
    displayName: 'Commands',
    icon: Icons.flash_on,
    title: 'Quick commands',
  );

  /// Ø¥Ù†Ø´Ø§Ø¡ Ù†ÙˆØ¹ Ù…Ø®ØµØµ
  static SuggestionTypeConfig custom({
    required String symbol,
    required String displayName,
    required IconData icon,
    Color? color,
    String? title,
  }) => SuggestionTypeConfig(
    symbol: symbol,
    displayName: displayName,
    icon: icon,
    color: color,
    title: title,
  );
}
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø¥Ù†Ø´Ø§Ø¡ Ø«ÙŠÙ… Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª

#### 2.1 Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionTheme`

```dart
/// Ø«ÙŠÙ… Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù…Ø©
class FloatingSuggestionTheme {
  // === Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ===
  final Color backgroundColor;
  final Color borderColor;
  final Color shadowColor;

  // === Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØªØ±ÙˆÙŠØ³Ø© ===
  final Color headerBackgroundColor;
  final Color headerIconColor;
  final Color headerTitleColor;

  // === Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± ===
  final Color itemBackgroundColor;
  final Color itemHoverColor;
  final Color itemSelectedColor;
  final Color itemIconBackgroundColor;
  final Color itemTitleColor;
  final Color itemSubtitleColor;
  final Color highlightColor;

  // === Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ ===
  final double borderRadius;
  final double borderWidth;
  final double elevation;
  final double itemHeight;
  final double maxHeight;
  final double iconSize;
  final double itemIconSize;
  final double itemIconRadius;

  // === Ø§Ù„Ø®Ø·ÙˆØ· ===
  final TextStyle? headerTitleStyle;
  final TextStyle? itemTitleStyle;
  final TextStyle? itemSubtitleStyle;
  final TextStyle? emptyStateStyle;

  // === Ø§Ù„Ø­Ø´ÙˆØ§Øª ===
  final EdgeInsets cardPadding;
  final EdgeInsets headerPadding;
  final EdgeInsets itemPadding;

  // === Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ===
  final Duration animationDuration;
  final Curve animationCurve;

  const FloatingSuggestionTheme({
    this.backgroundColor = Colors.white,
    this.borderColor = const Color(0xFFE0E0E0),
    this.shadowColor = const Color(0x1A000000),
    this.headerBackgroundColor = const Color(0xFFF5F5F5),
    this.headerIconColor = const Color(0xFF1976D2),
    this.headerTitleColor = const Color(0xFF424242),
    this.itemBackgroundColor = Colors.transparent,
    this.itemHoverColor = const Color(0xFFF5F5F5),
    this.itemSelectedColor = const Color(0xFFE3F2FD),
    this.itemIconBackgroundColor = const Color(0xFFE3F2FD),
    this.itemTitleColor = const Color(0xFF212121),
    this.itemSubtitleColor = const Color(0xFF757575),
    this.highlightColor = const Color(0xFFFFEB3B),
    this.borderRadius = 16.0,
    this.borderWidth = 1.0,
    this.elevation = 8.0,
    this.itemHeight = 56.0,
    this.maxHeight = 280.0,
    this.iconSize = 20.0,
    this.itemIconSize = 18.0,
    this.itemIconRadius = 20.0,
    this.headerTitleStyle,
    this.itemTitleStyle,
    this.itemSubtitleStyle,
    this.emptyStateStyle,
    this.cardPadding = EdgeInsets.zero,
    this.headerPadding = const EdgeInsets.all(12),
    this.itemPadding = const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
    this.animationDuration = const Duration(milliseconds: 200),
    this.animationCurve = Curves.easeOutCubic,
  });

  const FloatingSuggestionTheme.light() : this();

  const FloatingSuggestionTheme.dark() : this(
    backgroundColor: const Color(0xFF2D2D2D),
    borderColor: const Color(0xFF424242),
    shadowColor: const Color(0x40000000),
    headerBackgroundColor: const Color(0xFF383838),
    headerIconColor: const Color(0xFF64B5F6),
    headerTitleColor: const Color(0xFFE0E0E0),
    itemHoverColor: const Color(0xFF383838),
    itemSelectedColor: const Color(0xFF1E3A5F),
    itemIconBackgroundColor: const Color(0xFF1E3A5F),
    itemTitleColor: const Color(0xFFFFFFFF),
    itemSubtitleColor: const Color(0xFFBDBDBD),
  );

  FloatingSuggestionTheme copyWith({...});

  static FloatingSuggestionTheme lerp(
    FloatingSuggestionTheme? a,
    FloatingSuggestionTheme? b,
    double t,
  );
}
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

#### 3.1 ØªØ­Ø¯ÙŠØ« `FloatingSuggestionCard`

```dart
class FloatingSuggestionCard<T> extends StatefulWidget {
  /// Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø§Ù„ÙŠ
  final String query;

  /// ØªÙƒÙˆÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­
  final SuggestionTypeConfig typeConfig;

  /// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª
  final List<FloatingSuggestionItem<T>> suggestions;

  /// Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù‚ØªØ±Ø§Ø­
  final OnSuggestionSelected<T>? onSelected;

  /// Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
  final VoidCallback? onClose;

  /// Ø¯Ø§Ù„Ø© Ø§Ù„ÙÙ„ØªØ±Ø©
  final bool Function(FloatingSuggestionItem<T> item, String query)? onFilter;

  /// Ø¨Ù†Ø§Ø¡ Ø¹Ù†ØµØ± Ù…Ø®ØµØµ
  final Widget Function(
    BuildContext context,
    FloatingSuggestionItem<T> item,
    bool isSelected,
    String highlightQuery,
  )? itemBuilder;

  /// Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§Øº
  final Widget Function(BuildContext context)? emptyBuilder;

  /// Ø¨Ù†Ø§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
  final Widget Function(BuildContext context)? loadingBuilder;

  /// Ù‡Ù„ ÙÙŠ Ø­Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
  final bool isLoading;

  /// Ø«ÙŠÙ… Ù…Ø®ØµØµ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
  final FloatingSuggestionTheme? theme;

  /// ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯
  final bool enableKeyboardNavigation;

  /// ØªÙØ¹ÙŠÙ„ ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚
  final bool enableHighlighting;

  /// Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
  final double? width;
}
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†ØµØ±

#### 4.1 Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionItemWidget`

```dart
class FloatingSuggestionItemWidget<T> extends StatelessWidget {
  final FloatingSuggestionItem<T> item;
  final SuggestionTypeConfig typeConfig;
  final bool isSelected;
  final String highlightQuery;
  final VoidCallback? onTap;
  final FloatingSuggestionTheme theme;

  Widget build(BuildContext context) {
    return Material(
      color: isSelected ? theme.itemSelectedColor : theme.itemBackgroundColor,
      child: InkWell(
        onTap: onTap,
        hoverColor: theme.itemHoverColor,
        child: Container(
          height: theme.itemHeight,
          padding: theme.itemPadding,
          child: Row(
            children: [
              // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¹Ù†ØµØ±
              _buildItemIcon(),
              const SizedBox(width: 12),
              // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ù†ØµØ±
              Expanded(
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø¹ Ø§Ù„ØªÙ…ÙŠÙŠØ²
                    _buildHighlightedTitle(),
                    if (item.subtitle != null) ...[
                      const SizedBox(height: 2),
                      // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ
                      _buildSubtitle(),
                    ],
                  ],
                ),
              ),
              // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
              if (item.trailing != null) item.trailing!,
            ],
          ),
        ),
      ),
    );
  }

  /// Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ø¹ ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚
  Widget _buildHighlightedTitle() {
    if (highlightQuery.isEmpty) {
      return Text(item.label, style: theme.itemTitleStyle);
    }

    return RichText(
      text: TextSpan(
        children: _buildHighlightedSpans(
          item.label,
          highlightQuery,
          theme.itemTitleStyle,
          theme.highlightColor,
        ),
      ),
    );
  }
}
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯

#### 5.1 Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionController`

```dart
class FloatingSuggestionController extends ChangeNotifier {
  int _selectedIndex = 0;
  List<FloatingSuggestionItem> _items = [];

  int get selectedIndex => _selectedIndex;

  void setItems(List<FloatingSuggestionItem> items) {
    _items = items;
    _selectedIndex = 0;
    notifyListeners();
  }

  void moveUp() {
    if (_selectedIndex > 0) {
      _selectedIndex--;
      notifyListeners();
    }
  }

  void moveDown() {
    if (_selectedIndex < _items.length - 1) {
      _selectedIndex++;
      notifyListeners();
    }
  }

  FloatingSuggestionItem? get selectedItem {
    if (_items.isEmpty) return null;
    return _items[_selectedIndex];
  }

  void reset() {
    _selectedIndex = 0;
    _items = [];
    notifyListeners();
  }
}
```

---

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: ØªØ­Ø¯ÙŠØ« `input_models.dart`

#### 6.1 ØªØ­Ø³ÙŠÙ† `FloatingSuggestionItem`

```dart
class FloatingSuggestionItem<T> {
  final T value;
  final String label;
  final String? subtitle;
  final Widget? icon;
  final String? imageUrl;
  final Widget? trailing;
  final SuggestionTypeConfig typeConfig;
  final Map<String, dynamic>? metadata;

  const FloatingSuggestionItem({
    required this.value,
    required this.label,
    required this.typeConfig,
    this.subtitle,
    this.icon,
    this.imageUrl,
    this.trailing,
    this.metadata,
  });

  /// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù† ChatUserSuggestion
  factory FloatingSuggestionItem.fromUser(ChatUserSuggestion user) {
    return FloatingSuggestionItem<ChatUserSuggestion>(
      value: user,
      label: user.name,
      subtitle: user.username != null ? '@${user.username}' : null,
      imageUrl: user.imageUrl,
      typeConfig: FloatingSuggestionTypes.username,
    );
  }

  /// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù† Hashtag
  factory FloatingSuggestionItem.fromHashtag(Hashtag hashtag) {
    return FloatingSuggestionItem<Hashtag>(
      value: hashtag,
      label: '#${hashtag.hashtag}',
      typeConfig: FloatingSuggestionTypes.hashtag,
    );
  }
}
```

---

## ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù‡Ø§Ù…

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ø¹Ø§Ù„ÙŠØ©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 1.1 | Ø¥Ù†Ø´Ø§Ø¡ `SuggestionTypeConfig` | ÙƒÙ„Ø§Ø³ ØªÙƒÙˆÙŠÙ† Ù†ÙˆØ¹ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ |
| 1.2 | ØªØ­Ø¯ÙŠØ« `FloatingSuggestionType` | ØªØ­ÙˆÙŠÙ„Ù‡ Ù„Ù†Ø¸Ø§Ù… Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙˆØ³ÙŠØ¹ |
| 1.3 | Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionTypes` | Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¯Ù…Ø¬Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© |

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ù†Ø¸Ø§Ù… Ø§Ù„Ø«ÙŠÙ… (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ø¹Ø§Ù„ÙŠØ©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 2.1 | Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionTheme` | Ø«ÙŠÙ… ÙƒØ§Ù…Ù„ Ù„Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª |
| 2.2 | Ø¯Ù…Ø¬ Ù…Ø¹ `ChatThemeData` | Ø¥Ø¶Ø§ÙØ© Ø®Ø§ØµÙŠØ© floatingSuggestion |
| 2.3 | Ø¥Ø¶Ø§ÙØ© light/dark constructors | Ø¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ÙŠÙ† |

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ø¹Ø§Ù„ÙŠØ©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 3.1 | ØªØ­Ø¯ÙŠØ« `FloatingSuggestionCard` | Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© |
| 3.2 | Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© | Ø¸Ù‡ÙˆØ±/Ø§Ø®ØªÙØ§Ø¡ Ø³Ù„Ø³ |
| 3.3 | ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØµÙ…ÙŠÙ… | Ø¸Ù„Ø§Ù„ØŒ Ø­ÙˆØ§ÙØŒ Ø£Ù„ÙˆØ§Ù† |

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¹Ù†Ø§ØµØ± (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ù…ØªÙˆØ³Ø·Ø©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 4.1 | Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionItemWidget` | Ø¹Ù†ØµØ± Ù…Ù†ÙØµÙ„ Ù…Ø­Ø³Ù‘Ù† |
| 4.2 | Ø¥Ø¶Ø§ÙØ© ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù†Øµ | highlight Ù„Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ |
| 4.3 | Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ± | Ø¹Ø±Ø¶ ØµÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† |

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: ØªØ­Ø³ÙŠÙ† UX (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ù…ØªÙˆØ³Ø·Ø©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 5.1 | Ø¥Ù†Ø´Ø§Ø¡ `FloatingSuggestionController` | Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ |
| 5.2 | Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±Ø§Øº | Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù†ØªØ§Ø¦Ø¬ |
| 5.3 | Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ | Ù…Ø¤Ø´Ø± ØªØ­Ù…ÙŠÙ„ |

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: Ø§Ù„ØªÙƒØ§Ù…Ù„ (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ø¹Ø§Ù„ÙŠØ©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 6.1 | ØªØ­Ø¯ÙŠØ« `input_models.dart` | ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª |
| 6.2 | ØªØ­Ø¯ÙŠØ« `chat_input.dart` | Ø¯Ù…Ø¬ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª |
| 6.3 | ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ exports | ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© |

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ù„Ø£Ù…Ø«Ù„Ø© (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: Ù…Ù†Ø®ÙØ¶Ø©)
| # | Ø§Ù„Ù…Ù‡Ù…Ø© | Ø§Ù„ÙˆØµÙ |
|---|--------|-------|
| 7.1 | ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø«Ø§Ù„ | `ChatInputExample` |
| 7.2 | Ø¥Ø¶Ø§ÙØ© ØªÙˆØ«ÙŠÙ‚ | dartdoc comments |

---

## ğŸ¨ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù‚ØªØ±Ø­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”                              â•³ â”‚  â† Header
â”‚ â”‚ @  â”‚  Mention someone                  â”‚
â”‚ â””â”€â”€â”€â”€â”˜                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ â”‚ ğŸ‘¤   â”‚  Ahmed Mohamed                  â”‚  â† Item with avatar
â”‚ â”‚      â”‚  @ahmed â€¢ Admin                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ â”‚ ğŸ‘¤   â”‚  Sara Ali                       â”‚  â† Selected item
â”‚ â”‚      â”‚  @sara â€¢ Member            âœ“   â”‚     (highlighted)
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ â”‚ ğŸ‘¤   â”‚  Omar Hassan                    â”‚
â”‚ â”‚      â”‚  @omar â€¢ Member                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘â†“ Navigate  â†µ Select  Esc Close
```

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

### Ø§Ù„ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø¹ÙƒØ³ÙŠ
- Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ `FloatingSuggestionType` enum Ù„Ù„ØªÙˆØ§ÙÙ‚
- Ø¥Ø¶Ø§ÙØ© extension methods Ù„Ù„ØªØ­ÙˆÙŠÙ„
- Ø¯Ø¹Ù… Ø§Ù„Ù€ API Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù…Ø¹ ØªØ­Ø°ÙŠØ± deprecated

### Ø§Ù„Ø£Ø¯Ø§Ø¡
- Ø§Ø³ØªØ®Ø¯Ø§Ù… `const` constructors Ø­ÙŠØ«Ù…Ø§ Ø£Ù…ÙƒÙ†
- ØªØ¬Ù†Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©
- Ø§Ø³ØªØ®Ø¯Ø§Ù… `RepaintBoundary` Ù„Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©

### Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ (Accessibility)
- Ø¯Ø¹Ù… Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø´Ø§Ø´Ø©
- Ø§Ù„ØªØ¨Ø§ÙŠÙ† Ø§Ù„ÙƒØ§ÙÙŠ Ù„Ù„Ø£Ù„ÙˆØ§Ù†
- Ø£Ø­Ø¬Ø§Ù… Ø®Ø·ÙˆØ· Ù…Ù†Ø§Ø³Ø¨Ø©

---

## âœ… Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„

1. [ ] Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±
2. [ ] ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø£Ù†ÙˆØ§Ø¹ Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø³Ù‡ÙˆÙ„Ø©
3. [ ] Ø§Ù„Ø«ÙŠÙ… ÙŠØ¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ ÙˆØ§Ù„Ø¯Ø§ÙƒÙ†
4. [ ] Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø³Ù„Ø³
5. [ ] Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ø³Ù„Ø³Ø© (60fps)
6. [ ] Ø§Ù„ØªØµÙ…ÙŠÙ… Ù…ØªØ³Ù‚ Ù…Ø¹ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©
7. [ ] Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ÙƒØ§Ù…Ù„Ø© ÙˆÙ…Ø­Ø¯Ø«Ø©
8. [ ] Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø«Ø§Ù„ ØªØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙŠØ²Ø§Øª

---

## ğŸ“… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ø§Ù„Ù…Ù‚ØªØ±Ø­

| Ø§Ù„Ù…Ø±Ø­Ù„Ø© | Ø§Ù„Ù…Ù‡Ø§Ù… | Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© |
|---------|--------|----------|
| 1 | Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© + Ø§Ù„Ø«ÙŠÙ… | Ø¹Ø§Ù„ÙŠØ© |
| 2 | ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© + Ø§Ù„Ø¹Ù†Ø§ØµØ± | Ø¹Ø§Ù„ÙŠØ© |
| 3 | Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ + UX | Ù…ØªÙˆØ³Ø·Ø© |
| 4 | Ø§Ù„ØªÙƒØ§Ù…Ù„ + Ø§Ù„Ø£Ù…Ø«Ù„Ø© | Ø¹Ø§Ù„ÙŠØ© |

---

**Ù…Ù„Ø§Ø­Ø¸Ø©**: Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ. Ø¹Ù†Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©ØŒ Ø³Ø£Ø¨Ø¯Ø£ Ø¨ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰.
